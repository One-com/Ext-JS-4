<!DOCTYPE html><html><head><title>Sencha Documentation Project</title><link rel="stylesheet" href="../reset.css" type="text/css"><link rel="stylesheet" href="../prettify.css" type="text/css"><link rel="stylesheet" href="../prettify_sa.css" type="text/css"><script type="text/javascript" src="../prettify.js"></script></head><body onload="prettyPrint()"><pre class="prettyprint"><pre><a name="cls-Ext.menu.Item"></a>/**
 * @class Ext.menu.Item
 * @extends Ext.Component

A base class for all menu items that require menu-related functionality such as click handling,
sub-menus, icons, etc.

 * @xtype menuitem
 * @markdown
 * @constructor
 * @param {Object} config The config object
 */
Ext.define(&#39;Ext.menu.Item&#39;, {
    extend: &#39;Ext.Component&#39;,
    alias: &#39;widget.menuitem&#39;,
    alternateClassName: &#39;Ext.menu.TextItem&#39;,
    
    <a name="prop-Ext.menu.Item-{Boolean}"></a>/**
     * @property {Boolean} activated
     * Whether or not this item is currently activated
     */

    <a name="cfg-Ext.menu.Item-activeCls"></a>/**
     * @cfg {String} activeCls
     * The CSS class added to the menu item when the item is activated (focused/mouseover).
     * Defaults to `Ext.baseCSSPrefix + &#39;menu-item-active&#39;`.
     * @markdown
     */
    activeCls: Ext.baseCSSPrefix + &#39;menu-item-active&#39;,
    
    <a name="cfg-Ext.menu.Item-ariaRole"></a>/**
     * @cfg {String} ariaRole @hide
     */
    ariaRole: &#39;menuitem&#39;,
    
    <a name="cfg-Ext.menu.Item-canActivate"></a>/**
     * @cfg {Boolean} canActivate
     * Whether or not this menu item can be activated when focused/mouseovered. Defaults to `true`.
     * @markdown
     */
    canActivate: true,
    
    <a name="cfg-Ext.menu.Item-clickHideDelay"></a>/**
     * @cfg {Number} clickHideDelay
     * The delay in milliseconds to wait before hiding the menu after clicking the menu item.
     * This only has an effect when `hideOnClick: true`. Defaults to `1`.
     * @markdown
     */
    clickHideDelay: 1,
    
    <a name="cfg-Ext.menu.Item-destroyMenu"></a>/**
     * @cfg {Boolean} destroyMenu
     * Whether or not to destroy any associated sub-menu when this item is destroyed. Defaults to `true`.
     */
    destroyMenu: true,
    
    <a name="cfg-Ext.menu.Item-disabledCls"></a>/**
     * @cfg {String} disabledCls
     * The CSS class added to the menu item when the item is disabled.
     * Defaults to `Ext.baseCSSPrefix + &#39;menu-item-disabled&#39;`.
     * @markdown
     */
    disabledCls: Ext.baseCSSPrefix + &#39;menu-item-disabled&#39;,
    
    <a name="cfg-Ext.menu.Item-href"></a>/**
     * @cfg {String} href
     * The href attribute to use for the underlying anchor link. Defaults to `#`.
     * @markdown
     */
     
     <a name="cfg-Ext.menu.Item-hrefTarget"></a>/**
      * @cfg {String} hrefTarget
      * The target attribute to use for the underlying anchor link. Defaults to `undefined`.
      * @markdown
      */
    
    <a name="cfg-Ext.menu.Item-hideOnClick"></a>/**
     * @cfg {Boolean} hideOnClick
     * Whether to not to hide the owning menu when this item is clicked. Defaults to `true`.
     * @markdown
     */
    hideOnClick: true,
    
    <a name="cfg-Ext.menu.Item-icon"></a>/**
     * @cfg {String} icon
     * The path to an icon to display in this item. Defaults to `Ext.BLANK_IMAGE_URL`.
     * @markdown
     */
     
    <a name="cfg-Ext.menu.Item-iconCls"></a>/**
     * @cfg {String} iconCls
     * A CSS class that specifies a `background-image` to use as the icon for this item. Defaults to `undefined`.
     * @markdown
     */
    
    isMenuItem: true,
    
    <a name="cfg-Ext.menu.Item-menu"></a>/**
     * @cfg {Mixed} menu
     * Either an instance of {@link Ext.menu.Menu} or a config object for an {@link Ext.menu.Menu}
     * which will act as a sub-menu to this item.
     * @markdown
     * @property {Ext.menu.Menu} menu The sub-menu associated with this item, if one was configured.
     */
    
    <a name="cfg-Ext.menu.Item-menuAlign"></a>/**
     * @cfg {String} menuAlign
     * The default {@link Ext.core.Element#getAlignToXY Ext.Element.getAlignToXY} anchor position value for this
     * item&#39;s sub-menu relative to this item&#39;s position. Defaults to `&#39;tl-tr?&#39;`.
     * @markdown
     */
    menuAlign: &#39;tl-tr?&#39;,
    
    <a name="cfg-Ext.menu.Item-menuExpandDelay"></a>/**
     * @cfg {Number} menuExpandDelay
     * The delay in milliseconds before this item&#39;s sub-menu expands after this item is moused over. Defaults to `200`.
     * @markdown
     */
    menuExpandDelay: 200,
    
    <a name="cfg-Ext.menu.Item-menuHideDelay"></a>/**
     * @cfg {Number} menuHideDelay
     * The delay in milliseconds before this item&#39;s sub-menu hides after this item is moused out. Defaults to `200`.
     * @markdown
     */
    menuHideDelay: 200,
    
    <a name="cfg-Ext.menu.Item-plain"></a>/**
     * @cfg {Boolean} plain
     * Whether or not this item is plain text/html with no icon or visual activation. Defaults to `false`.
     * @markdown
     */
    
    renderTpl: [
        &#39;&lt;tpl if=&quot;plain&quot;&gt;&#39;,
            &#39;{text}&#39;,
        &#39;&lt;/tpl&gt;&#39;,
        &#39;&lt;tpl if=&quot;!plain&quot;&gt;&#39;,
            &#39;&lt;a class=&quot;&#39; + Ext.baseCSSPrefix + &#39;menu-item-link&quot; href=&quot;{href}&quot; &lt;tpl if=&quot;hrefTarget&quot;&gt;target=&quot;{hrefTarget}&quot;&lt;/tpl&gt; hidefocus=&quot;true&quot; unselectable=&quot;on&quot;&gt;&#39;,
                &#39;&lt;img src=&quot;{icon}&quot; class=&quot;&#39; + Ext.baseCSSPrefix + &#39;menu-item-icon {iconCls}&quot; /&gt;&#39;,
                &#39;&lt;span class=&quot;&#39; + Ext.baseCSSPrefix + &#39;menu-item-text&quot; &lt;tpl if=&quot;menu&quot;&gt;style=&quot;margin-right: 17px;&quot;&lt;/tpl&gt; &gt;{text}&lt;/span&gt;&#39;,
                &#39;&lt;tpl if=&quot;menu&quot;&gt;&#39;,
                    &#39;&lt;img src=&quot;&#39; + Ext.BLANK_IMAGE_URL + &#39;&quot; class=&quot;&#39; + Ext.baseCSSPrefix + &#39;menu-item-arrow&quot; /&gt;&#39;,
                &#39;&lt;/tpl&gt;&#39;,
            &#39;&lt;/a&gt;&#39;,
        &#39;&lt;/tpl&gt;&#39;
    ],
    
    <a name="cfg-Ext.menu.Item-text"></a>/**
     * @cfg {String} text
     * The text/html to display in this item. Defaults to `undefined`.
     * @markdown
     */
    
    activate: function() {
        var me = this;
        
        if (!me.activated &amp;&amp; me.canActivate &amp;&amp; me.rendered &amp;&amp; !me.isDisabled() &amp;&amp; me.isVisible()) {
            me.el.addCls(me.activeCls);
            me.focus();
            me.activated = true;
            me.fireEvent(&#39;activate&#39;, me);
        }
    },
    
    blur: function() {
        this.$focused = false;
        this.callParent(arguments);
    },
    
    deactivate: function() {
        var me = this;
        
        if (me.activated) {
            me.el.removeCls(me.activeCls);
            me.blur();
            me.hideMenu();
            me.activated = false;
            me.fireEvent(&#39;deactivate&#39;, me);
        }
    },
    
    deferExpandMenu: function() {
        var me = this;
        
        if (!me.menu.rendered || !me.menu.isVisible()) {
            me.parentMenu.activeChild = me.menu;
            me.menu.parentItem = me;
            me.menu.parentMenu = me.menu.ownerCt = me.parentMenu;
            me.menu.showBy(me, me.menuAlign);
        }
    },
    
    deferHideMenu: function() {
        if (this.menu.isVisible()) {
            this.menu.hide();
        }
    },
    
    deferHideParentMenus: function() {
        Ext.menu.MenuManager.hideAll();
    },
    
    expandMenu: function(delay) {
        var me = this;
        
        if (me.menu) {
            clearTimeout(me.hideMenuTimer);
            if (delay === 0) {
                me.deferExpandMenu();
            } else {
                me.expandMenuTimer = Ext.defer(me.deferExpandMenu, Ext.isNumber(delay) ? delay : me.menuExpandDelay, me);
            }
        }
    },
    
    focus: function() {
        this.$focused = true;
        this.callParent(arguments);
    },
    
    getRefItems: function(deep){
        var menu = this.menu,
            items;
        
        if (menu) {
            items = menu.getRefItems(deep);
            items.unshift(menu);
        }   
        return items || [];   
    },
    
    hideMenu: function(delay) {
        var me = this;
        
        if (me.menu) {
            clearTimeout(me.expandMenuTimer);
            me.hideMenuTimer = Ext.defer(me.deferHideMenu, Ext.isNumber(delay) ? delay : me.menuHideDelay, me);
        }
    },
    
    initComponent: function() {
        var me = this,
            prefix = Ext.baseCSSPrefix,
            cls = [prefix + &#39;menu-item&#39;];
        
        me.addEvents(
            <a name="event-Ext.menu.Item-activate"></a>/**
             * @event activate
             * Fires when this item is activated
             * @param {Ext.menu.Item} item The activated item
             */
            &#39;activate&#39;,
            
            <a name="event-Ext.menu.Item-click"></a>/**
             * @event click
             * Fires when this item is clicked
             * @param {Ext.menu.Item} item The item that was clicked
             * @param {Ext.EventObject} e The underyling {@link Ext.EventObject}.
             */
            &#39;click&#39;,
            
            <a name="event-Ext.menu.Item-deactivate"></a>/**
             * @event deactivate
             * Fires when this tiem is deactivated
             * @param {Ext.menu.Item} item The deactivated item
             */
            &#39;deactivate&#39;
        );
        
        if (me.plain) {
            cls.push(prefix + &#39;menu-item-plain&#39;);
        }
        
        if (me.cls) {
            cls.push(me.cls);
        }
        
        me.cls = cls.join(&#39; &#39;);
        
        if (me.menu) {
            me.menu = Ext.menu.MenuManager.get(me.menu);
        }
        
        me.callParent(arguments);
    },
    
    onClick: function(e) {
        var me = this;
        
        if (!me.href) {
            e.stopEvent();
        }
        
        if (me.disabled) {
            return;
        }
        
        if (me.hideOnClick) {
            me.deferHideParentMenusTimer = Ext.defer(me.deferHideParentMenus, me.clickHideDelay, me);
        }
        
        Ext.callback(me.handler, me.scope || me, [me, e]);
        me.fireEvent(&#39;click&#39;, me, e);
        
        if (!me.hideOnClick) {
            me.focus();
        }
    },
    
    onDestroy: function() {
        var me = this;
        
        clearTimeout(me.expandMenuTimer);
        clearTimeout(me.hideMenuTimer);
        clearTimeout(me.deferHideParentMenusTimer);
        
        if (me.menu) {
            delete me.menu.parentItem;
            delete me.menu.parentMenu;
            delete me.menu.ownerCt;
            if (me.destroyMenu !== false) {
                me.menu.destroy();
            }
        }
        me.callParent(arguments);
    },
    
    onRender: function(ct, pos) {
        var me = this,
            prefix = &#39;.&#39; + Ext.baseCSSPrefix;
        
        Ext.applyIf(me.renderData, {
            href: me.href || &#39;#&#39;,
            hrefTarget: me.hrefTarget,
            icon: me.icon || Ext.BLANK_IMAGE_URL,
            iconCls: me.iconCls,
            menu: Ext.isDefined(me.menu),
            plain: me.plain,
            text: me.text
        });
        
        Ext.applyIf(me.renderSelectors, {
            itemEl: prefix + &#39;menu-item-link&#39;,
            iconEl: prefix + &#39;menu-item-icon&#39;,
            textEl: prefix + &#39;menu-item-text&#39;,
            arrowEl: prefix + &#39;menu-item-arrow&#39;
        });
        
        me.callParent(arguments);
    },
    
    <a name="method-Ext.menu.Item-setHandler"></a>/**
     * Sets the {@link #click} handler of this item
     * @param {Function} fn The handler function
     * @param {Object} scope (optional) The scope of the handler function
     */
    setHandler: function(fn, scope) {
        this.handler = fn || null;
        this.scope = scope;
    },
    
    <a name="method-Ext.menu.Item-setIconClass"></a>/**
     * Sets the {@link #iconCls} of this item
     * @param {String} iconCls The CSS class to set to {@link #iconCls}
     */
    setIconClass: function(iconCls) {
        var me = this;
        
        if (me.iconEl) {
            if (me.iconCls) {
                me.iconEl.removeCls(me.iconCls);
            }
            
            if (iconCls) {
                me.iconEl.addCls(iconCls);
            }
        }
        
        me.iconCls = iconCls;
    },
    
    <a name="method-Ext.menu.Item-setText"></a>/**
     * Sets the {@link #text} of this item
     * @param {String} text The {@link #text}
     */
    setText: function(text) {
        var me = this,
            el = me.textEl || me.el,
            newWidth;
        
        if (text &amp;&amp; el) {
            el.update(text);
                
            if (me.textEl) {
                // Resize the menu to fit the text
                newWidth = me.textEl.getWidth() + me.iconEl.getWidth() + 25 + (me.arrowEl ? me.arrowEl.getWidth() : 0);
                if (newWidth &gt; me.itemEl.getWidth()) {
                    me.parentMenu.setWidth(newWidth);
                }
            }
        } else if (el) {
            el.update(&#39;&#39;);
        }
        
        me.text = text;
    }
});
￿</pre></pre></body></html>